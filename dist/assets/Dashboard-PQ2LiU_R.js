import{j as e,u as s}from"./index-Cp6IXOH3.js";import{u as a,r as t}from"./react-vendor-Dt--M4EP.js";import{b as i,c as l,F as c,C as r,B as n,a as d,N as o,d as m}from"./Card-C1qsx9RO.js";import{u as h}from"./useScrollReveal-BC-245pq.js";import{S as u}from"./Skeleton-DteAVSoX.js";import{a as x,A as p}from"./api.client-Bi3E9hB6.js";import{g as v}from"./helpers-CQG1Y5Ia.js";import"./icons-9q4Ww-N4.js";const j=(e={})=>({activePentests:Number(e.activePentests||0),completedAudits:Number(e.completedAudits||0),pendingReports:Number(e.pendingReports||0),vulnerabilitiesFound:Number(e.vulnerabilitiesFound||0),remediationRate:Number(e.remediationRate||0)}),y=(e={})=>({id:String(e.id||""),type:e.type||"activity",title:e.title||"Untitled activity",status:e.status||"pending",date:e.date||Date.now(),icon:e.icon||"shield"}),N=(e=[])=>e.map(y),g=(e={})=>{var s,a,t;return{stats:j(e.stats||{}),recentActivity:N(e.recentActivity||[]),quickStats:{avgResponseTime:(null==(s=null==e?void 0:e.quickStats)?void 0:s.avgResponseTime)||"N/A",securityScore:Number((null==(a=null==e?void 0:e.quickStats)?void 0:a.securityScore)||0),lastScan:(null==(t=null==e?void 0:e.quickStats)?void 0:t.lastScan)||null}}},b=[{key:"activePentests",label:"Active Pentests",icon:i,color:"#10b981"},{key:"completedAudits",label:"Completed Audits",icon:l,color:"#3b82f6"},{key:"pendingReports",label:"Pending Reports",icon:l,color:"#f59e0b"},{key:"vulnerabilitiesFound",label:"Vulnerabilities Found",icon:c,color:"#ef4444"}],k=({stats:s={}})=>e.jsx("div",{className:"stats-grid reveal-on-scroll",children:b.map(a=>e.jsx(r,{hover3d:!0,padding:"large",shadow:"medium",className:"reveal-on-scroll dramatic-card",children:e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",style:{background:`${a.color}20`,color:a.color},children:e.jsx(a.icon,{size:24})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("p",{className:"stat-label",children:a.label}),e.jsx("h2",{className:"stat-value",children:s[a.key]??0})]})]})},a.key))}),w=({actions:s=[],onAction:a})=>e.jsxs("div",{className:"section reveal-on-scroll dramatic-section",children:[e.jsx("h2",{className:"section-title",children:"Quick Actions"}),e.jsx("div",{className:"quick-actions-grid",children:s.map((s,t)=>e.jsx(r,{hover3d:!0,onClick:()=>a(s),padding:"large",shadow:"medium",className:"quick-action-card reveal-on-scroll dramatic-card",style:{animationDelay:.1+.1*t+"s"},children:e.jsxs("div",{className:"quick-action-content",children:[e.jsx("div",{className:"quick-action-icon",style:{background:`${s.color}20`,color:s.color},children:e.jsx(s.icon,{size:28})}),e.jsx("h3",{className:"quick-action-title",children:s.title}),e.jsx("p",{className:"quick-action-description",children:s.description}),e.jsx(n,{variant:"card",size:"small",style:{marginTop:"auto"},children:"Get Started →"})]})},s.title))})]}),f={pentest:i,audit:l,report:c},S=({activities:s=[],onViewAll:a,getStatusColor:t,getStatusLabel:i})=>e.jsxs("div",{className:"section reveal-on-scroll dramatic-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{className:"section-title",children:"Recent Activity"}),e.jsx("button",{onClick:a,className:"view-all-link",children:"View All →"})]}),e.jsx(r,{padding:"none",shadow:"medium",children:e.jsx("div",{className:"activity-list",children:s.map((a,l)=>{const r=f[a.type]||c;return e.jsxs("div",{className:"activity-item dramatic-item",style:{borderBottom:l<s.length-1?"1px solid var(--border-color)":"none",animationDelay:.1+.1*l+"s"},children:[e.jsx("div",{className:"activity-icon",children:e.jsx(r,{size:20})}),e.jsxs("div",{className:"activity-content",children:[e.jsx("h4",{className:"activity-title",children:a.title}),e.jsx("p",{className:"activity-date",children:v(a.date)})]}),e.jsx("div",{className:"activity-status",children:e.jsx("span",{className:"status-badge",style:{background:`${t(a.status)}20`,color:t(a.status),border:`1px solid ${t(a.status)}50`},children:i(a.status)})})]},a.id)})})})]}),A=()=>e.jsx(r,{padding:"large",shadow:"small",className:"security-notice reveal-on-scroll dramatic-card",children:e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[e.jsx(d,{size:28}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,marginBottom:"0.5rem",color:"var(--text-primary)"},children:"Security Notice"}),e.jsx("p",{style:{margin:0,color:"var(--text-secondary)",lineHeight:1.6},children:"All your data is encrypted and stored securely. We never share your information with third parties. For any security concerns, please contact our team immediately."})]})]})}),q=()=>{const c=a(),{user:n}=s(),[d,v]=t.useState(!0),[j,y]=t.useState(null),[N,b]=t.useState([]),[f,q]=t.useState("");t.useEffect(()=>{R()},[]),h(".reveal-on-scroll",{},[d]);const R=async()=>{v(!0);try{const e=await(async()=>{const e=await x.get(p.DASHBOARD.OVERVIEW);return e.success?{success:!0,data:g(e.data||{})}:{success:!1,error:e.error||"Failed to fetch dashboard overview"}})();if(!e.success)throw new Error(e.error||"Failed to load dashboard");y(e.data.stats),b(e.data.recentActivity)}catch(e){console.error("Failed to load dashboard data:",e),q("Unable to load dashboard data. Please try again.")}finally{v(!1)}},F=[{title:"Request Pentest",description:"Schedule a new penetration testing engagement",icon:i,path:"/pentest",color:"#10b981"},{title:"View Audits",description:"Access your security audit reports",icon:l,path:"/audits",color:"#3b82f6"},{title:"Submit Feedback",description:"Share your experience or report issues",icon:m,path:"/feedback",color:"#f59e0b"}];return d?e.jsxs(e.Fragment,{children:[e.jsx(o,{}),e.jsx("div",{className:"dashboard-container",children:e.jsxs("div",{className:"dashboard-wrapper",children:[e.jsx("div",{className:"dashboard-header",children:e.jsxs("div",{children:[e.jsx(u,{className:"skeleton-line",style:{width:"220px"}}),e.jsx(u,{className:"skeleton-line",style:{width:"320px",marginTop:"0.75rem"}})]})}),e.jsx("div",{className:"stats-grid",children:[...Array(4)].map((s,a)=>e.jsx(r,{padding:"large",shadow:"medium",children:e.jsxs("div",{className:"stat-card",children:[e.jsx(u,{className:"skeleton-circle",style:{width:"64px",height:"64px"}}),e.jsxs("div",{className:"stat-content",children:[e.jsx(u,{className:"skeleton-line",style:{width:"120px"}}),e.jsx(u,{className:"skeleton-line",style:{width:"70px",height:"26px",marginTop:"0.75rem"}})]})]})},a))}),e.jsxs("div",{className:"section",children:[e.jsx(u,{className:"skeleton-line",style:{width:"140px"}}),e.jsx("div",{className:"quick-actions-grid",children:[...Array(3)].map((s,a)=>e.jsx(r,{padding:"large",shadow:"medium",className:"quick-action-card",children:e.jsxs("div",{className:"quick-action-content",children:[e.jsx(u,{className:"skeleton-rect",style:{width:"80px",height:"80px",borderRadius:"16px"}}),e.jsx(u,{className:"skeleton-line",style:{width:"160px"}}),e.jsx(u,{className:"skeleton-line",style:{width:"220px"}}),e.jsx(u,{className:"skeleton-line",style:{width:"120px",marginTop:"auto"}})]})},a))})]}),e.jsxs("div",{className:"section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx(u,{className:"skeleton-line",style:{width:"160px"}}),e.jsx(u,{className:"skeleton-line",style:{width:"90px"}})]}),e.jsx(r,{padding:"none",shadow:"medium",children:e.jsx("div",{className:"activity-list",children:[...Array(3)].map((s,a)=>e.jsxs("div",{className:"activity-item",style:{borderBottom:a<2?"1px solid var(--border-color)":"none"},children:[e.jsx(u,{className:"skeleton-circle",style:{width:"48px",height:"48px"}}),e.jsxs("div",{className:"activity-content",children:[e.jsx(u,{className:"skeleton-line",style:{width:"180px"}}),e.jsx(u,{className:"skeleton-line",style:{width:"120px",marginTop:"0.5rem"}})]}),e.jsx(u,{className:"skeleton-line",style:{width:"90px",height:"20px"}})]},a))})})]})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx(o,{}),e.jsx("div",{className:"dashboard-container",children:e.jsxs("div",{className:"dashboard-wrapper",children:[e.jsx("div",{className:"dashboard-header reveal-on-scroll dramatic-header",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"dashboard-title",children:["Welcome back, ",(null==n?void 0:n.name)||"User","!"]}),e.jsx("p",{className:"dashboard-subtitle",children:"Here's your security overview and recent activity"})]})}),f&&e.jsx(r,{padding:"large",shadow:"small",className:"security-notice reveal-on-scroll",children:e.jsx("p",{style:{margin:0,color:"var(--text-secondary)"},children:f})}),e.jsx(k,{stats:j||{}}),e.jsx(w,{actions:F,onAction:e=>c(e.path)}),e.jsx(S,{activities:N,onViewAll:()=>c("/audits"),getStatusColor:e=>{switch(e){case"completed":return"#10b981";case"in-progress":return"#3b82f6";case"pending":return"#f59e0b";default:return"#6b7280"}},getStatusLabel:e=>{switch(e){case"completed":return"Completed";case"in-progress":return"In Progress";case"pending":return"Pending";default:return"Unknown"}}}),e.jsx(A,{})]})})]})};export{q as default};
