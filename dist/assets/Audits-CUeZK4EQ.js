import{u as e,j as s}from"./index-C70WDyyI.js";import{r as a}from"./react-vendor-Dt--M4EP.js";import{C as i,e as t,c as l,B as r,f as d}from"./Card-BJrnA0Es.js";import{N as n}from"./Navbar-ClqoYrFh.js";import{u as c}from"./useScrollReveal-BC-245pq.js";import{S as o}from"./Skeleton-VzpXPS06.js";import{g as m}from"./helpers-CQG1Y5Ia.js";import"./icons-9q4Ww-N4.js";import"./ThemeToggle-CZrI65VG.js";const h=()=>{const{user:h}=e(),[u,x]=a.useState(!0),[p,j]=a.useState([]),[v,N]=a.useState([]),[y,g]=a.useState(null),[w,f]=a.useState("all"),[b,k]=a.useState("");c(".reveal-on-scroll",{},[u,v.length]),a.useEffect(()=>{S()},[]),a.useEffect(()=>{A()},[p,w,b]);const S=async()=>{x(!0);try{await new Promise(e=>setTimeout(e,1e3));const e=[{id:"1",title:"Q4 2024 Security Assessment",type:"Web Application",date:Date.now()-432e6,status:"completed",severity:{critical:2,high:5,medium:12,low:8,info:15},remediationProgress:65,tester:"Security Team A",reportAvailable:!0},{id:"2",title:"Network Infrastructure Audit",type:"Network",date:Date.now()-1296e6,status:"in-review",severity:{critical:0,high:3,medium:7,low:5,info:10},remediationProgress:40,tester:"Security Team B",reportAvailable:!1},{id:"3",title:"Mobile App Security Scan",type:"Mobile Application",date:Date.now()-2592e6,status:"completed",severity:{critical:1,high:4,medium:9,low:11,info:20},remediationProgress:100,tester:"Security Team C",reportAvailable:!0},{id:"4",title:"API Security Assessment",type:"API",date:Date.now()-3888e6,status:"completed",severity:{critical:0,high:2,medium:6,low:8,info:12},remediationProgress:85,tester:"Security Team A",reportAvailable:!0}];j(e)}catch(e){console.error("Failed to load audits:",e)}finally{x(!1)}},A=()=>{let e=[...p];if("all"!==w&&(e=e.filter(e=>e.status===w)),b.trim()){const s=b.toLowerCase();e=e.filter(e=>e.title.toLowerCase().includes(s)||e.type.toLowerCase().includes(s)||e.tester.toLowerCase().includes(s))}N(e)},C=e=>{switch(e){case"critical":return"#dc2626";case"high":return"#f59e0b";case"medium":return"#eab308";case"low":return"#3b82f6";default:return"#6b7280"}},T=e=>{switch(e){case"completed":return"#10b981";case"in-review":return"#f59e0b";default:return"#6b7280"}},P=e=>{switch(e){case"completed":return"Completed";case"in-review":return"In Review";case"draft":return"Draft";default:return"Unknown"}},D=e=>{return s.jsx(i,{hover3d:!0,padding:"large",shadow:"medium",children:s.jsxs("div",{className:"audit-card",children:[s.jsxs("div",{className:"audit-header",children:[s.jsxs("div",{className:"audit-title-section",children:[s.jsx("h3",{className:"audit-title",children:e.title}),s.jsxs("div",{className:"audit-meta",children:[s.jsx("span",{className:"audit-type",children:e.type}),s.jsx("span",{className:"audit-date",children:m(e.date)})]})]}),s.jsx("span",{className:"status-badge",style:{background:`${T(e.status)}20`,color:T(e.status),border:`1px solid ${T(e.status)}50`},children:P(e.status)})]}),s.jsxs("div",{className:"severity-summary",children:[s.jsx("h4",{className:"summary-title",children:"Findings by Severity"}),s.jsx("div",{className:"severity-grid",children:Object.entries(e.severity).map(([e,a])=>s.jsx("div",{className:"severity-item",children:s.jsxs("div",{className:"severity-badge",style:{background:`${C(e)}20`,color:C(e),border:`1px solid ${C(e)}50`},children:[s.jsx("span",{className:"severity-count",children:a}),s.jsx("span",{className:"severity-label",children:e})]})},e))}),s.jsxs("div",{className:"total-findings",children:["Total: ",(a=e.severity,Object.values(a).reduce((e,s)=>e+s,0))," findings"]})]}),"completed"===e.status&&s.jsxs("div",{className:"remediation-section",children:[s.jsxs("div",{className:"remediation-header",children:[s.jsx("span",{className:"remediation-label",children:"Remediation Progress"}),s.jsxs("span",{className:"remediation-percentage",children:[e.remediationProgress,"%"]})]}),s.jsx("div",{className:"progress-bar",children:s.jsx("div",{className:"progress-fill",style:{width:`${e.remediationProgress}%`,background:100===e.remediationProgress?"#10b981":"#f59e0b"}})})]}),s.jsxs("div",{className:"audit-footer",children:[s.jsxs("div",{className:"audit-tester",children:[s.jsx("span",{className:"tester-label",children:"Assessed by:"}),s.jsx("span",{className:"tester-name",children:e.tester})]}),s.jsxs("div",{className:"audit-actions",children:[s.jsx(r,{variant:"secondary",size:"small",onClick:()=>(e=>{g(e)})(e),children:"View Details"}),e.reportAvailable&&s.jsxs(r,{variant:"primary",size:"small",onClick:()=>{return s=e.id,console.log("Downloading report for audit:",s),void alert("Download functionality will be implemented with backend integration");var s},children:[s.jsx(d,{size:16}),"Download"]})]})]})]})},e.id);var a};return u?s.jsxs(s.Fragment,{children:[s.jsx(n,{}),s.jsx("div",{className:"audits-container",children:s.jsxs("div",{className:"audits-wrapper",children:[s.jsxs("div",{className:"page-header",children:[s.jsx(o,{className:"skeleton-line",style:{width:"220px"}}),s.jsx(o,{className:"skeleton-line",style:{width:"320px",marginTop:"0.75rem"}})]}),s.jsx(i,{padding:"medium",shadow:"small",children:s.jsxs("div",{className:"filters-section",children:[s.jsx("div",{className:"search-box",children:s.jsx(o,{className:"skeleton-rect",style:{width:"100%",height:"44px",borderRadius:"8px"}})}),s.jsxs("div",{className:"filter-group",children:[s.jsx(o,{className:"skeleton-line",style:{width:"70px"}}),s.jsx("div",{className:"filter-buttons",style:{gap:"0.5rem"},children:[...Array(3)].map((e,a)=>s.jsx(o,{className:"skeleton-rect",style:{width:"90px",height:"36px",borderRadius:"8px"}},a))})]})]})}),s.jsx("div",{className:"audits-grid",children:[...Array(3)].map((e,a)=>s.jsx(i,{padding:"large",shadow:"medium",children:s.jsxs("div",{className:"audit-card",children:[s.jsxs("div",{className:"audit-header",children:[s.jsx(o,{className:"skeleton-line",style:{width:"200px"}}),s.jsx(o,{className:"skeleton-line",style:{width:"80px",height:"20px"}})]}),s.jsxs("div",{className:"audit-meta",style:{marginTop:"1rem"},children:[s.jsx(o,{className:"skeleton-line",style:{width:"160px"}}),s.jsx(o,{className:"skeleton-line",style:{width:"120px"}})]}),s.jsxs("div",{className:"audit-summary",style:{marginTop:"1.5rem"},children:[s.jsx(o,{className:"skeleton-line",style:{width:"100%"}}),s.jsx(o,{className:"skeleton-line",style:{width:"80%",marginTop:"0.5rem"}})]}),s.jsxs("div",{className:"audit-footer",style:{marginTop:"1.5rem"},children:[s.jsx(o,{className:"skeleton-line",style:{width:"140px"}}),s.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[s.jsx(o,{className:"skeleton-rect",style:{width:"110px",height:"36px",borderRadius:"8px"}}),s.jsx(o,{className:"skeleton-rect",style:{width:"110px",height:"36px",borderRadius:"8px"}})]})]})]})},a))})]})})]}):s.jsxs(s.Fragment,{children:[s.jsx(n,{}),s.jsx("div",{className:"audits-container",children:s.jsxs("div",{className:"audits-wrapper",children:[s.jsx("div",{className:"page-header reveal-on-scroll",children:s.jsxs("div",{children:[s.jsx("h1",{className:"page-title",children:"Security Audits"}),s.jsx("p",{className:"page-subtitle",children:"View and manage security audit reports and vulnerability assessments"})]})}),s.jsx(i,{padding:"medium",shadow:"small",className:"reveal-on-scroll",children:s.jsxs("div",{className:"filters-section",children:[s.jsxs("div",{className:"search-box",children:[s.jsx("span",{className:"search-icon",children:s.jsx(t,{size:16})}),s.jsx("input",{type:"text",placeholder:"Search audits...",value:b,onChange:e=>k(e.target.value),className:"search-input"})]}),s.jsxs("div",{className:"filter-group",children:[s.jsx("label",{className:"filter-label",children:"Status:"}),s.jsxs("div",{className:"filter-buttons",children:[s.jsx("button",{className:"filter-button "+("all"===w?"active":""),onClick:()=>f("all"),children:"All"}),s.jsx("button",{className:"filter-button "+("completed"===w?"active":""),onClick:()=>f("completed"),children:"Completed"}),s.jsx("button",{className:"filter-button "+("in-review"===w?"active":""),onClick:()=>f("in-review"),children:"In Review"})]})]})]})}),s.jsx("div",{className:"results-info reveal-on-scroll",children:s.jsxs("p",{children:["Showing ",s.jsx("strong",{children:v.length})," of ",s.jsx("strong",{children:p.length})," audits"]})}),0===v.length?s.jsx(i,{padding:"large",className:"reveal-on-scroll",children:s.jsxs("div",{className:"empty-state",children:[s.jsx("span",{style:{fontSize:"3rem",display:"inline-flex"},children:s.jsx(l,{size:40})}),s.jsx("h3",{children:"No audits found"}),s.jsx("p",{children:b?"Try adjusting your search query or filters.":"No security audits available at the moment."})]})}):s.jsx("div",{className:"audits-grid reveal-on-scroll",children:v.map(e=>D(e))})]})})]})};export{h as default};
