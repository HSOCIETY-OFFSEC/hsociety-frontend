import{j as e,L as a}from"./index-3VLiaMkN.js";import{u as s,r}from"./react-vendor-Dt--M4EP.js";import{N as t,C as o,F as n,B as i,a as c}from"./Card-6Jx8w-cl.js";import{a as l,A as d}from"./api.client-D_08oeUV.js";/* empty css             */import"./icons-9q4Ww-N4.js";import"./env.config-sfTiOdmx.js";const m=()=>{const m=s(),[u,p]=r.useState(!1),[h,g]=r.useState(""),[j,x]=r.useState({accountType:"corporate",name:"",email:"",companyOrSchool:"",password:"",confirmPassword:"",agree:!1}),y=(e,a)=>{x(s=>({...s,[e]:a}))};return e.jsxs(e.Fragment,{children:[e.jsx(t,{}),e.jsx("div",{className:"auth-container",children:e.jsxs("div",{className:"auth-wrapper",children:[e.jsx("div",{className:"auth-logo",children:e.jsx(a,{size:"large"})}),e.jsxs(o,{className:"auth-card",children:[e.jsxs("div",{className:"auth-header",children:[e.jsx("h1",{children:"Create Account"}),e.jsx("p",{className:"auth-subtitle",children:"Register as a corporate team or student and get started."})]}),h&&e.jsxs("div",{className:"auth-error",children:[e.jsx("span",{className:"error-icon",children:e.jsx(n,{size:16})}),h]}),e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),g("");const a=(e=>!e.name||e.name.trim().length<2?"Please enter your full name":/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email||"")?!e.companyOrSchool||e.companyOrSchool.trim().length<2?"student"===e.accountType?"Please enter your school":"Please enter your company":!e.password||e.password.length<8?"Password must be at least 8 characters":e.password!==e.confirmPassword?"Passwords do not match":e.agree?"":"You must accept the terms to continue":"Please enter a valid email address")(j);if(a)g(a);else{p(!0);try{const e=(e=>({role:"student"===e.accountType?"student":"corporate",profile:{fullName:e.name.trim(),organization:e.companyOrSchool.trim()},credentials:{email:e.email.trim().toLowerCase(),password:e.password},consent:{acceptedTerms:Boolean(e.agree),acceptedAt:(new Date).toISOString()},metadata:{source:"web",version:"1"}}))(j),a=await(async e=>{try{const a=await l.post(d.AUTH.REGISTER,e);return a.success?{success:!0,data:a.data}:{success:!1,error:a.error||"Registration request failed"}}catch(h){return console.error("[REGISTER] Failed:",h),{success:!1,error:h.message||"Registration request failed"}}})(e);if(!a.success)throw new Error(a.error||"Registration failed");m("/login",{state:{email:e.credentials.email}})}catch(s){console.error("Registration failed:",s),g("Registration failed. Please try again.")}finally{p(!1)}}},className:"auth-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Account Type"}),e.jsxs("div",{className:"auth-toggle",children:[e.jsx("button",{type:"button",className:"corporate"===j.accountType?"active":"",onClick:()=>y("accountType","corporate"),disabled:u,children:"Corporate"}),e.jsx("button",{type:"button",className:"student"===j.accountType?"active":"",onClick:()=>y("accountType","student"),disabled:u,children:"Student"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"register-name",children:"Full Name"}),e.jsx("input",{id:"register-name",type:"text",className:"form-input",value:j.name,onChange:e=>y("name",e.target.value),placeholder:"Jane Doe",disabled:u})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"register-email",children:"Email Address"}),e.jsx("input",{id:"register-email",type:"email",className:"form-input",value:j.email,onChange:e=>y("email",e.target.value),placeholder:"you@example.com",disabled:u})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"register-org",children:"student"===j.accountType?"School / Program":"Company"}),e.jsx("input",{id:"register-org",type:"text",className:"form-input",value:j.companyOrSchool,onChange:e=>y("companyOrSchool",e.target.value),placeholder:"student"===j.accountType?"University name":"Company name",disabled:u})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"register-password",children:"Password"}),e.jsx("input",{id:"register-password",type:"password",className:"form-input",value:j.password,onChange:e=>y("password",e.target.value),placeholder:"At least 8 characters",disabled:u})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"register-confirm-password",children:"Confirm Password"}),e.jsx("input",{id:"register-confirm-password",type:"password",className:"form-input",value:j.confirmPassword,onChange:e=>y("confirmPassword",e.target.value),placeholder:"Re-enter password",disabled:u})]}),e.jsxs("label",{className:"auth-checkbox",children:[e.jsx("input",{type:"checkbox",checked:j.agree,onChange:e=>y("agree",e.target.checked),disabled:u}),e.jsx("span",{children:"I agree to the Terms and Privacy Policy"})]}),e.jsx(i,{type:"submit",variant:"primary",fullWidth:!0,loading:u,disabled:u,children:u?"Creating account...":"Create Account"})]}),e.jsx("div",{className:"auth-footer",children:e.jsxs("p",{children:["Already have an account?"," ",e.jsx("button",{onClick:()=>m("/login"),className:"auth-link-inline",disabled:u,children:"Login"})]})})]}),e.jsx("div",{className:"auth-notice",children:e.jsxs("p",{children:[e.jsx("span",{className:"notice-icon",children:e.jsx(c,{size:16})}),"Your registration data is encrypted in transit."]})})]})})]})};export{m as default};
