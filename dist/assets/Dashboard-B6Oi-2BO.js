import{j as e,u as s}from"./index-3VLiaMkN.js";import{u as a,r as t}from"./react-vendor-Dt--M4EP.js";import{b as i,c as r,F as c,C as l,B as n,a as o,N as d,d as m}from"./Card-6Jx8w-cl.js";import{u as h}from"./useScrollReveal-BC-245pq.js";import{S as x}from"./Skeleton-DiKwSbwE.js";import"./env.config-sfTiOdmx.js";import{g as u}from"./helpers-CQG1Y5Ia.js";import"./icons-9q4Ww-N4.js";const p=async()=>{try{await new Promise(e=>setTimeout(e,800));const e=await(async()=>{try{return await new Promise(e=>setTimeout(e,500)),{success:!0,data:{activePentests:3,completedAudits:12,pendingReports:2,vulnerabilitiesFound:47,remediationRate:68}}}catch(e){return console.error("Failed to fetch dashboard stats:",e),{success:!1,error:e.message}}})(),s=await(async()=>{try{return await new Promise(e=>setTimeout(e,500)),{success:!0,data:[{id:"1",type:"pentest",title:"Web Application Pentest",status:"in-progress",date:Date.now()-1728e5,icon:"shield"},{id:"2",type:"audit",title:"Security Audit Report",status:"completed",date:Date.now()-432e6,icon:"file"},{id:"3",type:"report",title:"Vulnerability Assessment",status:"pending",date:Date.now()-6048e5,icon:"alert"}]}}catch(e){return console.error("Failed to fetch recent activity:",e),{success:!1,error:e.message}}})(5);return{success:!0,data:{stats:e.data,recentActivity:s.data,quickStats:{avgResponseTime:"24 hours",securityScore:85,lastScan:Date.now()-2592e5}}}}catch(e){return console.error("Failed to fetch dashboard overview:",e),{success:!1,error:e.message}}},j=[{key:"activePentests",label:"Active Pentests",icon:i,color:"#10b981"},{key:"completedAudits",label:"Completed Audits",icon:r,color:"#3b82f6"},{key:"pendingReports",label:"Pending Reports",icon:r,color:"#f59e0b"},{key:"vulnerabilitiesFound",label:"Vulnerabilities Found",icon:c,color:"#ef4444"}],y=({stats:s={}})=>e.jsx("div",{className:"stats-grid reveal-on-scroll",children:j.map(a=>e.jsx(l,{hover3d:!0,padding:"large",shadow:"medium",className:"reveal-on-scroll dramatic-card",children:e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",style:{background:`${a.color}20`,color:a.color},children:e.jsx(a.icon,{size:24})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("p",{className:"stat-label",children:a.label}),e.jsx("h2",{className:"stat-value",children:s[a.key]??0})]})]})},a.key))}),v=({actions:s=[],onAction:a})=>e.jsxs("div",{className:"section reveal-on-scroll dramatic-section",children:[e.jsx("h2",{className:"section-title",children:"Quick Actions"}),e.jsx("div",{className:"quick-actions-grid",children:s.map((s,t)=>e.jsx(l,{hover3d:!0,onClick:()=>a(s),padding:"large",shadow:"medium",className:"quick-action-card reveal-on-scroll dramatic-card",style:{animationDelay:.1+.1*t+"s"},children:e.jsxs("div",{className:"quick-action-content",children:[e.jsx("div",{className:"quick-action-icon",style:{background:`${s.color}20`,color:s.color},children:e.jsx(s.icon,{size:28})}),e.jsx("h3",{className:"quick-action-title",children:s.title}),e.jsx("p",{className:"quick-action-description",children:s.description}),e.jsx(n,{variant:"card",size:"small",style:{marginTop:"auto"},children:"Get Started →"})]})},s.title))})]}),g={pentest:i,audit:r,report:c},N=({activities:s=[],onViewAll:a,getStatusColor:t,getStatusLabel:i})=>e.jsxs("div",{className:"section reveal-on-scroll dramatic-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{className:"section-title",children:"Recent Activity"}),e.jsx("button",{onClick:a,className:"view-all-link",children:"View All →"})]}),e.jsx(l,{padding:"none",shadow:"medium",children:e.jsx("div",{className:"activity-list",children:s.map((a,r)=>{const l=g[a.type]||c;return e.jsxs("div",{className:"activity-item dramatic-item",style:{borderBottom:r<s.length-1?"1px solid var(--border-color)":"none",animationDelay:.1+.1*r+"s"},children:[e.jsx("div",{className:"activity-icon",children:e.jsx(l,{size:20})}),e.jsxs("div",{className:"activity-content",children:[e.jsx("h4",{className:"activity-title",children:a.title}),e.jsx("p",{className:"activity-date",children:u(a.date)})]}),e.jsx("div",{className:"activity-status",children:e.jsx("span",{className:"status-badge",style:{background:`${t(a.status)}20`,color:t(a.status),border:`1px solid ${t(a.status)}50`},children:i(a.status)})})]},a.id)})})})]}),b=()=>e.jsx(l,{padding:"large",shadow:"small",className:"security-notice reveal-on-scroll dramatic-card",children:e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[e.jsx(o,{size:28}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,marginBottom:"0.5rem",color:"var(--text-primary)"},children:"Security Notice"}),e.jsx("p",{style:{margin:0,color:"var(--text-secondary)",lineHeight:1.6},children:"All your data is encrypted and stored securely. We never share your information with third parties. For any security concerns, please contact our team immediately."})]})]})}),w=()=>{const c=a(),{user:n}=s(),[o,u]=t.useState(!0),[j,g]=t.useState(null),[w,k]=t.useState([]),[f,A]=t.useState("");t.useEffect(()=>{S()},[]),h(".reveal-on-scroll",{},[o]);const S=async()=>{u(!0);try{const e=await p();if(!e.success)throw new Error(e.error||"Failed to load dashboard");g(e.data.stats),k(e.data.recentActivity)}catch(e){console.error("Failed to load dashboard data:",e),A("Unable to load dashboard data. Please try again.")}finally{u(!1)}},F=[{title:"Request Pentest",description:"Schedule a new penetration testing engagement",icon:i,path:"/pentest",color:"#10b981"},{title:"View Audits",description:"Access your security audit reports",icon:r,path:"/audits",color:"#3b82f6"},{title:"Submit Feedback",description:"Share your experience or report issues",icon:m,path:"/feedback",color:"#f59e0b"}];return o?e.jsxs(e.Fragment,{children:[e.jsx(d,{}),e.jsx("div",{className:"dashboard-container",children:e.jsxs("div",{className:"dashboard-wrapper",children:[e.jsx("div",{className:"dashboard-header",children:e.jsxs("div",{children:[e.jsx(x,{className:"skeleton-line",style:{width:"220px"}}),e.jsx(x,{className:"skeleton-line",style:{width:"320px",marginTop:"0.75rem"}})]})}),e.jsx("div",{className:"stats-grid",children:[...Array(4)].map((s,a)=>e.jsx(l,{padding:"large",shadow:"medium",children:e.jsxs("div",{className:"stat-card",children:[e.jsx(x,{className:"skeleton-circle",style:{width:"64px",height:"64px"}}),e.jsxs("div",{className:"stat-content",children:[e.jsx(x,{className:"skeleton-line",style:{width:"120px"}}),e.jsx(x,{className:"skeleton-line",style:{width:"70px",height:"26px",marginTop:"0.75rem"}})]})]})},a))}),e.jsxs("div",{className:"section",children:[e.jsx(x,{className:"skeleton-line",style:{width:"140px"}}),e.jsx("div",{className:"quick-actions-grid",children:[...Array(3)].map((s,a)=>e.jsx(l,{padding:"large",shadow:"medium",className:"quick-action-card",children:e.jsxs("div",{className:"quick-action-content",children:[e.jsx(x,{className:"skeleton-rect",style:{width:"80px",height:"80px",borderRadius:"16px"}}),e.jsx(x,{className:"skeleton-line",style:{width:"160px"}}),e.jsx(x,{className:"skeleton-line",style:{width:"220px"}}),e.jsx(x,{className:"skeleton-line",style:{width:"120px",marginTop:"auto"}})]})},a))})]}),e.jsxs("div",{className:"section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx(x,{className:"skeleton-line",style:{width:"160px"}}),e.jsx(x,{className:"skeleton-line",style:{width:"90px"}})]}),e.jsx(l,{padding:"none",shadow:"medium",children:e.jsx("div",{className:"activity-list",children:[...Array(3)].map((s,a)=>e.jsxs("div",{className:"activity-item",style:{borderBottom:a<2?"1px solid var(--border-color)":"none"},children:[e.jsx(x,{className:"skeleton-circle",style:{width:"48px",height:"48px"}}),e.jsxs("div",{className:"activity-content",children:[e.jsx(x,{className:"skeleton-line",style:{width:"180px"}}),e.jsx(x,{className:"skeleton-line",style:{width:"120px",marginTop:"0.5rem"}})]}),e.jsx(x,{className:"skeleton-line",style:{width:"90px",height:"20px"}})]},a))})})]})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx(d,{}),e.jsx("div",{className:"dashboard-container",children:e.jsxs("div",{className:"dashboard-wrapper",children:[e.jsx("div",{className:"dashboard-header reveal-on-scroll dramatic-header",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"dashboard-title",children:["Welcome back, ",(null==n?void 0:n.name)||"User","!"]}),e.jsx("p",{className:"dashboard-subtitle",children:"Here's your security overview and recent activity"})]})}),f&&e.jsx(l,{padding:"large",shadow:"small",className:"security-notice reveal-on-scroll",children:e.jsx("p",{style:{margin:0,color:"var(--text-secondary)"},children:f})}),e.jsx(y,{stats:j||{}}),e.jsx(v,{actions:F,onAction:e=>c(e.path)}),e.jsx(N,{activities:w,onViewAll:()=>c("/audits"),getStatusColor:e=>{switch(e){case"completed":return"#10b981";case"in-progress":return"#3b82f6";case"pending":return"#f59e0b";default:return"#6b7280"}},getStatusLabel:e=>{switch(e){case"completed":return"Completed";case"in-progress":return"In Progress";case"pending":return"Pending";default:return"Unknown"}}}),e.jsx(b,{})]})})]})};export{w as default};
