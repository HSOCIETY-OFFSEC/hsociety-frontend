import{j as e,u as s}from"./index-C70WDyyI.js";import{u as t,r as a}from"./react-vendor-Dt--M4EP.js";import{b as i,c as r,F as l,C as n,B as c,a as o,d}from"./Card-BJrnA0Es.js";import{u as m}from"./useScrollReveal-BC-245pq.js";import{N as u}from"./Navbar-ClqoYrFh.js";import{S as h}from"./Skeleton-VzpXPS06.js";import{g as p}from"./helpers-CQG1Y5Ia.js";import"./icons-9q4Ww-N4.js";import"./ThemeToggle-CZrI65VG.js";const x={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},v=(e,s="")=>void 0!==import.meta&&x&&x[e]||s,j={mode:v("MODE","development"),api:{baseURL:v("VITE_API_BASE_URL","http://localhost:3000/api"),timeout:parseInt(v("VITE_API_TIMEOUT","30000")),version:v("VITE_API_VERSION","v1")},auth:{tokenKey:v("VITE_AUTH_TOKEN_KEY","hsociety_token"),sessionDuration:parseInt(v("VITE_SESSION_DURATION","86400000")),inactivityTimeout:parseInt(v("VITE_INACTIVITY_TIMEOUT","900000")),enableTwoFA:"true"===v("VITE_ENABLE_2FA","true")},security:{enableEncryption:"true"===v("VITE_ENABLE_ENCRYPTION","false"),encryptionKey:v("VITE_ENCRYPTION_KEY",""),enableCSRF:"true"===v("VITE_ENABLE_CSRF","true"),enableRateLimiting:"true"===v("VITE_ENABLE_RATE_LIMITING","true")},features:{enablePentest:"true"===v("VITE_FEATURE_PENTEST","true"),enableAudits:"true"===v("VITE_FEATURE_AUDITS","true"),enableFeedback:"true"===v("VITE_FEATURE_FEEDBACK","true"),enableNotifications:"true"===v("VITE_FEATURE_NOTIFICATIONS","true"),enableFileUpload:"true"===v("VITE_FEATURE_FILE_UPLOAD","true")},upload:{maxFileSize:parseInt(v("VITE_MAX_FILE_SIZE","5242880")),allowedTypes:v("VITE_ALLOWED_FILE_TYPES","image/jpeg,image/png,application/pdf").split(",")},analytics:{enabled:"true"===v("VITE_ANALYTICS_ENABLED","false"),trackingId:v("VITE_ANALYTICS_TRACKING_ID","")},logging:{level:v("VITE_LOG_LEVEL","info"),enableConsole:"true"===v("VITE_LOG_CONSOLE","true"),enableRemote:"true"===v("VITE_LOG_REMOTE","false")},app:{name:v("VITE_APP_NAME","HSOCIETY"),version:v("VITE_APP_VERSION","1.0.0"),description:v("VITE_APP_DESCRIPTION","Offensive Security Platform")}},y=()=>{const e=["VITE_API_BASE_URL"].filter(e=>!v(e));if(e.length>0&&(console.warn("[ENV] Missing required environment variables:",e),"production"===v("MODE")||"production"===v("VITE_MODE")))throw new Error(`Missing required environment variables: ${e.join(", ")}`);console.log("[ENV] Environment configuration loaded:",{mode:j.mode,apiBaseURL:j.api.baseURL,features:j.features})};"development"!==v("MODE")&&"development"!==v("VITE_MODE")||y();const N=async()=>{try{await new Promise(e=>setTimeout(e,800));const e=await(async()=>{try{return await new Promise(e=>setTimeout(e,500)),{success:!0,data:{activePentests:3,completedAudits:12,pendingReports:2,vulnerabilitiesFound:47,remediationRate:68}}}catch(e){return console.error("Failed to fetch dashboard stats:",e),{success:!1,error:e.message}}})(),s=await(async()=>{try{return await new Promise(e=>setTimeout(e,500)),{success:!0,data:[{id:"1",type:"pentest",title:"Web Application Pentest",status:"in-progress",date:Date.now()-1728e5,icon:"shield"},{id:"2",type:"audit",title:"Security Audit Report",status:"completed",date:Date.now()-432e6,icon:"file"},{id:"3",type:"report",title:"Vulnerability Assessment",status:"pending",date:Date.now()-6048e5,icon:"alert"}]}}catch(e){return console.error("Failed to fetch recent activity:",e),{success:!1,error:e.message}}})(5);return{success:!0,data:{stats:e.data,recentActivity:s.data,quickStats:{avgResponseTime:"24 hours",securityScore:85,lastScan:Date.now()-2592e5}}}}catch(e){return console.error("Failed to fetch dashboard overview:",e),{success:!1,error:e.message}}},E=[{key:"activePentests",label:"Active Pentests",icon:i,color:"#10b981"},{key:"completedAudits",label:"Completed Audits",icon:r,color:"#3b82f6"},{key:"pendingReports",label:"Pending Reports",icon:r,color:"#f59e0b"},{key:"vulnerabilitiesFound",label:"Vulnerabilities Found",icon:l,color:"#ef4444"}],g=({stats:s={}})=>e.jsx("div",{className:"stats-grid reveal-on-scroll",children:E.map(t=>e.jsx(n,{hover3d:!0,padding:"large",shadow:"medium",className:"reveal-on-scroll dramatic-card",children:e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",style:{background:`${t.color}20`,color:t.color},children:e.jsx(t.icon,{size:24})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("p",{className:"stat-label",children:t.label}),e.jsx("h2",{className:"stat-value",children:s[t.key]??0})]})]})},t.key))}),T=({actions:s=[],onAction:t})=>e.jsxs("div",{className:"section reveal-on-scroll dramatic-section",children:[e.jsx("h2",{className:"section-title",children:"Quick Actions"}),e.jsx("div",{className:"quick-actions-grid",children:s.map((s,a)=>e.jsx(n,{hover3d:!0,onClick:()=>t(s),padding:"large",shadow:"medium",className:"quick-action-card reveal-on-scroll dramatic-card",style:{animationDelay:.1+.1*a+"s"},children:e.jsxs("div",{className:"quick-action-content",children:[e.jsx("div",{className:"quick-action-icon",style:{background:`${s.color}20`,color:s.color},children:e.jsx(s.icon,{size:28})}),e.jsx("h3",{className:"quick-action-title",children:s.title}),e.jsx("p",{className:"quick-action-description",children:s.description}),e.jsx(c,{variant:"card",size:"small",style:{marginTop:"auto"},children:"Get Started →"})]})},s.title))})]}),b={pentest:i,audit:r,report:l},I=({activities:s=[],onViewAll:t,getStatusColor:a,getStatusLabel:i})=>e.jsxs("div",{className:"section reveal-on-scroll dramatic-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{className:"section-title",children:"Recent Activity"}),e.jsx("button",{onClick:t,className:"view-all-link",children:"View All →"})]}),e.jsx(n,{padding:"none",shadow:"medium",children:e.jsx("div",{className:"activity-list",children:s.map((t,r)=>{const n=b[t.type]||l;return e.jsxs("div",{className:"activity-item dramatic-item",style:{borderBottom:r<s.length-1?"1px solid var(--border-color)":"none",animationDelay:.1+.1*r+"s"},children:[e.jsx("div",{className:"activity-icon",children:e.jsx(n,{size:20})}),e.jsxs("div",{className:"activity-content",children:[e.jsx("h4",{className:"activity-title",children:t.title}),e.jsx("p",{className:"activity-date",children:p(t.date)})]}),e.jsx("div",{className:"activity-status",children:e.jsx("span",{className:"status-badge",style:{background:`${a(t.status)}20`,color:a(t.status),border:`1px solid ${a(t.status)}50`},children:i(t.status)})})]},t.id)})})})]}),_=()=>e.jsx(n,{padding:"large",shadow:"small",className:"security-notice reveal-on-scroll dramatic-card",children:e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[e.jsx(o,{size:28}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,marginBottom:"0.5rem",color:"var(--text-primary)"},children:"Security Notice"}),e.jsx("p",{style:{margin:0,color:"var(--text-secondary)",lineHeight:1.6},children:"All your data is encrypted and stored securely. We never share your information with third parties. For any security concerns, please contact our team immediately."})]})]})}),A=()=>{const l=t(),{user:c}=s(),[o,p]=a.useState(!0),[x,v]=a.useState(null),[j,y]=a.useState([]),[E,b]=a.useState("");a.useEffect(()=>{A()},[]),m(".reveal-on-scroll",{},[o]);const A=async()=>{p(!0);try{const e=await N();if(!e.success)throw new Error(e.error||"Failed to load dashboard");v(e.data.stats),y(e.data.recentActivity)}catch(e){console.error("Failed to load dashboard data:",e),b("Unable to load dashboard data. Please try again.")}finally{p(!1)}},w=[{title:"Request Pentest",description:"Schedule a new penetration testing engagement",icon:i,path:"/pentest",color:"#10b981"},{title:"View Audits",description:"Access your security audit reports",icon:r,path:"/audits",color:"#3b82f6"},{title:"Submit Feedback",description:"Share your experience or report issues",icon:d,path:"/feedback",color:"#f59e0b"}];return o?e.jsxs(e.Fragment,{children:[e.jsx(u,{}),e.jsx("div",{className:"dashboard-container",children:e.jsxs("div",{className:"dashboard-wrapper",children:[e.jsx("div",{className:"dashboard-header",children:e.jsxs("div",{children:[e.jsx(h,{className:"skeleton-line",style:{width:"220px"}}),e.jsx(h,{className:"skeleton-line",style:{width:"320px",marginTop:"0.75rem"}})]})}),e.jsx("div",{className:"stats-grid",children:[...Array(4)].map((s,t)=>e.jsx(n,{padding:"large",shadow:"medium",children:e.jsxs("div",{className:"stat-card",children:[e.jsx(h,{className:"skeleton-circle",style:{width:"64px",height:"64px"}}),e.jsxs("div",{className:"stat-content",children:[e.jsx(h,{className:"skeleton-line",style:{width:"120px"}}),e.jsx(h,{className:"skeleton-line",style:{width:"70px",height:"26px",marginTop:"0.75rem"}})]})]})},t))}),e.jsxs("div",{className:"section",children:[e.jsx(h,{className:"skeleton-line",style:{width:"140px"}}),e.jsx("div",{className:"quick-actions-grid",children:[...Array(3)].map((s,t)=>e.jsx(n,{padding:"large",shadow:"medium",className:"quick-action-card",children:e.jsxs("div",{className:"quick-action-content",children:[e.jsx(h,{className:"skeleton-rect",style:{width:"80px",height:"80px",borderRadius:"16px"}}),e.jsx(h,{className:"skeleton-line",style:{width:"160px"}}),e.jsx(h,{className:"skeleton-line",style:{width:"220px"}}),e.jsx(h,{className:"skeleton-line",style:{width:"120px",marginTop:"auto"}})]})},t))})]}),e.jsxs("div",{className:"section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx(h,{className:"skeleton-line",style:{width:"160px"}}),e.jsx(h,{className:"skeleton-line",style:{width:"90px"}})]}),e.jsx(n,{padding:"none",shadow:"medium",children:e.jsx("div",{className:"activity-list",children:[...Array(3)].map((s,t)=>e.jsxs("div",{className:"activity-item",style:{borderBottom:t<2?"1px solid var(--border-color)":"none"},children:[e.jsx(h,{className:"skeleton-circle",style:{width:"48px",height:"48px"}}),e.jsxs("div",{className:"activity-content",children:[e.jsx(h,{className:"skeleton-line",style:{width:"180px"}}),e.jsx(h,{className:"skeleton-line",style:{width:"120px",marginTop:"0.5rem"}})]}),e.jsx(h,{className:"skeleton-line",style:{width:"90px",height:"20px"}})]},t))})})]})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx(u,{}),e.jsx("div",{className:"dashboard-container",children:e.jsxs("div",{className:"dashboard-wrapper",children:[e.jsx("div",{className:"dashboard-header reveal-on-scroll dramatic-header",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"dashboard-title",children:["Welcome back, ",(null==c?void 0:c.name)||"User","!"]}),e.jsx("p",{className:"dashboard-subtitle",children:"Here's your security overview and recent activity"})]})}),E&&e.jsx(n,{padding:"large",shadow:"small",className:"security-notice reveal-on-scroll",children:e.jsx("p",{style:{margin:0,color:"var(--text-secondary)"},children:E})}),e.jsx(g,{stats:x||{}}),e.jsx(T,{actions:w,onAction:e=>l(e.path)}),e.jsx(I,{activities:j,onViewAll:()=>l("/audits"),getStatusColor:e=>{switch(e){case"completed":return"#10b981";case"in-progress":return"#3b82f6";case"pending":return"#f59e0b";default:return"#6b7280"}},getStatusLabel:e=>{switch(e){case"completed":return"Completed";case"in-progress":return"In Progress";case"pending":return"Pending";default:return"Unknown"}}}),e.jsx(_,{})]})})]})};export{A as default};
