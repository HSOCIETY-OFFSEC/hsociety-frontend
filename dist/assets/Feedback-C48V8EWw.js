import{u as e,j as s}from"./index-Cp6IXOH3.js";import{r as a}from"./react-vendor-Dt--M4EP.js";import{N as i,C as l,j as r,B as c,F as n,l as t,b as o,d,m}from"./Card-C1qsx9RO.js";import{v as u}from"./input.validator-7PKJK-co.js";import{u as h}from"./useScrollReveal-BC-245pq.js";import{a as p,A as j}from"./api.client-Bi3E9hB6.js";import"./icons-9q4Ww-N4.js";const x=(e={})=>{var s,a,i;return{id:String(e.id||""),type:e.type||"general",subject:e.subject||"",message:e.message||"",status:e.status||"received",priority:e.priority||"normal",date:e.date||Date.now(),ticketNumber:e.ticketNumber||"",contact:{name:(null==(s=null==e?void 0:e.contact)?void 0:s.name)||"",email:(null==(a=null==e?void 0:e.contact)?void 0:a.email)||"",allowContact:Boolean(null==(i=null==e?void 0:e.contact)?void 0:i.allowContact)}}},b=async e=>{const s={type:(a=e).type,priority:a.priority,subject:a.subject.trim(),message:a.message.trim(),contact:{name:a.name.trim(),email:a.email.trim().toLowerCase(),allowContact:Boolean(a.allowContact)},metadata:{source:"web",version:"1"}};var a;const i=await p.post(j.FEEDBACK.SUBMIT,s);return i.success?{success:!0,message:"Feedback submitted successfully",data:x(i.data)}:{success:!1,error:i.error||"Failed to submit feedback"}},v=()=>{var p,j;const{user:x}=e();h();const[v,f]=a.useState({name:(null==x?void 0:x.name)||"",email:(null==x?void 0:x.email)||"",type:"general",subject:"",message:"",priority:"normal",allowContact:!0}),[g,y]=a.useState({}),[N,k]=a.useState(!1),[w,C]=a.useState(!1),[F,S]=a.useState(null),q=[{value:"bug",label:"Bug Report",icon:n,description:"Report a technical issue"},{value:"feature",label:"Feature Request",icon:t,description:"Suggest a new feature"},{value:"security",label:"Security Concern",icon:o,description:"Report a security issue"},{value:"general",label:"General Feedback",icon:d,description:"Share your thoughts"}],z=e=>{const{name:s,value:a,type:i,checked:l}=e.target;f(e=>({...e,[s]:"checkbox"===i?l:a})),g[s]&&y(e=>({...e,[s]:""}))};return s.jsxs(s.Fragment,{children:[s.jsx(i,{}),s.jsx("div",{className:"feedback-container",children:s.jsxs("div",{className:"feedback-wrapper",children:[s.jsxs("div",{className:"feedback-header reveal-on-scroll",children:[s.jsx("h1",{className:"feedback-title",children:"We Value Your Feedback"}),s.jsx("p",{className:"feedback-subtitle",children:"Help us improve by sharing your thoughts, reporting issues, or suggesting features"})]}),w&&s.jsx(l,{padding:"large",shadow:"medium",className:"success-card reveal-on-scroll",children:s.jsxs("div",{className:"success-content",children:[s.jsx("div",{className:"success-icon-large",children:s.jsx(r,{size:40})}),s.jsx("h2",{children:"Thank You!"}),s.jsx("p",{children:"Your feedback has been submitted successfully. We appreciate you taking the time to help us improve HSOCIETY."}),(null==(p=null==F?void 0:F.contact)?void 0:p.allowContact)&&s.jsxs("p",{className:"contact-note",children:["We'll reach out to you at ",s.jsx("strong",{children:(null==(j=null==F?void 0:F.contact)?void 0:j.email)||v.email})," if we need additional information."]}),(null==F?void 0:F.ticketNumber)&&s.jsxs("p",{className:"contact-note",children:["Ticket: ",s.jsx("strong",{children:F.ticketNumber})]}),s.jsx(c,{variant:"primary",onClick:()=>{C(!1),S(null)},style:{marginTop:"1rem"},children:"Submit Another Feedback"})]})}),!w&&s.jsxs(l,{padding:"large",shadow:"medium",className:"reveal-on-scroll",children:[g.submit&&s.jsxs("div",{className:"error-message",children:[s.jsx("span",{className:"error-icon",children:s.jsx(n,{size:18})}),g.submit]}),s.jsxs("form",{onSubmit:async e=>{var s;e.preventDefault(),y({}),C(!1),S(null);const a={name:v.name,email:v.email,subject:v.subject,message:v.message},i=u(a,{name:{required:!0,minLength:2},email:{required:!0,type:"email"},subject:{required:!0,minLength:5},message:{required:!0,minLength:20}});if(i.isValid){k(!0);try{const e={...v,...i.sanitizedData},a=await b(e);if(!a.success)throw new Error(a.error||"Failed to submit feedback.");S({...a.data,contact:(null==(s=a.data)?void 0:s.contact)||{name:e.name,email:e.email,allowContact:e.allowContact}}),C(!0),f({name:(null==x?void 0:x.name)||"",email:(null==x?void 0:x.email)||"",type:"general",subject:"",message:"",priority:"normal",allowContact:!0}),window.scrollTo({top:0,behavior:"smooth"})}catch(l){y({submit:"Failed to submit feedback. Please try again."}),console.error("Feedback submission failed:",l)}finally{k(!1)}}else y(i.errors)},className:"feedback-form",children:[s.jsxs("div",{className:"form-section",children:[s.jsx("h3",{className:"section-label",children:"What type of feedback?"}),s.jsx("div",{className:"type-grid",children:q.map(e=>s.jsxs("label",{className:"type-card "+(v.type===e.value?"selected":""),children:[s.jsx("input",{type:"radio",name:"type",value:e.value,checked:v.type===e.value,onChange:z,className:"type-radio"}),s.jsxs("div",{className:"type-content",children:[s.jsxs("div",{className:"type-label",children:[s.jsx("span",{className:"type-icon",children:s.jsx(e.icon,{size:18})}),e.label]}),s.jsx("div",{className:"type-description",children:e.description})]})]},e.value))})]}),s.jsxs("div",{className:"form-section",children:[s.jsx("h3",{className:"section-label",children:"Contact Information"}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"name",children:"Name *"}),s.jsx("input",{type:"text",id:"name",name:"name",value:v.name,onChange:z,placeholder:"Your name",className:"form-input "+(g.name?"error":""),required:!0}),g.name&&s.jsx("span",{className:"field-error",children:g.name})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"email",children:"Email *"}),s.jsx("input",{type:"email",id:"email",name:"email",value:v.email,onChange:z,placeholder:"your@email.com",className:"form-input "+(g.email?"error":""),required:!0}),g.email&&s.jsx("span",{className:"field-error",children:g.email})]})]})]}),s.jsxs("div",{className:"form-section",children:[s.jsx("h3",{className:"section-label",children:"Feedback Details"}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"subject",children:"Subject *"}),s.jsx("input",{type:"text",id:"subject",name:"subject",value:v.subject,onChange:z,placeholder:"Brief summary of your feedback",className:"form-input "+(g.subject?"error":""),required:!0}),g.subject&&s.jsx("span",{className:"field-error",children:g.subject})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"message",children:"Message *"}),s.jsx("textarea",{id:"message",name:"message",value:v.message,onChange:z,placeholder:"Please provide detailed information about your feedback...",rows:8,className:"form-input "+(g.message?"error":""),required:!0}),g.message&&s.jsx("span",{className:"field-error",children:g.message}),s.jsxs("span",{className:"field-hint",children:["Minimum 20 characters â€¢ ",v.message.length," / 20"]})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"priority",children:"Priority Level"}),s.jsxs("select",{id:"priority",name:"priority",value:v.priority,onChange:z,className:"form-input",children:[s.jsx("option",{value:"low",children:"Low - Minor issue or suggestion"}),s.jsx("option",{value:"normal",children:"Normal - Standard feedback"}),s.jsx("option",{value:"high",children:"High - Important issue"}),s.jsx("option",{value:"critical",children:"Critical - Urgent security concern"})]})]})]}),s.jsx("div",{className:"form-section",children:s.jsx("div",{className:"checkbox-group",children:s.jsxs("label",{className:"checkbox-label",children:[s.jsx("input",{type:"checkbox",name:"allowContact",checked:v.allowContact,onChange:z,className:"checkbox-input"}),s.jsx("span",{className:"checkbox-text",children:"Allow us to contact you about this feedback"})]})})}),s.jsx("div",{className:"form-actions",children:s.jsx(c,{type:"submit",variant:"primary",size:"large",fullWidth:!0,loading:N,disabled:N,children:N?"Submitting...":"Submit Feedback"})})]})]}),s.jsxs("div",{className:"info-section reveal-on-scroll",children:[s.jsx(l,{padding:"medium",shadow:"small",children:s.jsxs("div",{className:"info-card",children:[s.jsx("span",{className:"info-icon",children:s.jsx(o,{size:18})}),s.jsxs("div",{children:[s.jsx("h4",{children:"Privacy & Security"}),s.jsx("p",{children:"Your feedback is confidential and will only be used to improve our services. For security concerns, we respond within 24 hours."})]})]})}),s.jsx(l,{padding:"medium",shadow:"small",children:s.jsxs("div",{className:"info-card",children:[s.jsx("span",{className:"info-icon",children:s.jsx(m,{size:18})}),s.jsxs("div",{children:[s.jsx("h4",{children:"Response Time"}),s.jsx("p",{children:"We typically respond to feedback within 2-3 business days. Critical security issues are prioritized and addressed immediately."})]})]})}),s.jsx(l,{padding:"medium",shadow:"small",children:s.jsxs("div",{className:"info-card",children:[s.jsx("span",{className:"info-icon",children:s.jsx(d,{size:18})}),s.jsxs("div",{children:[s.jsx("h4",{children:"Alternative Contact"}),s.jsxs("p",{children:["Prefer email? You can also reach us directly at"," ",s.jsx("a",{href:"mailto:feedback@hsociety.com",children:"feedback@hsociety.com"})]})]})]})})]})]})})]})};export{v as default};
