const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Login-v7QJJN69.js","assets/react-vendor-Dt--M4EP.js","assets/Card-BLTIzP3v.js","assets/icons-9q4Ww-N4.js","assets/auth-bIoAzs_h.css","assets/Register-A1qVRr0H.js","assets/env.config-sfTiOdmx.js","assets/Dashboard-CpP9fkU-.js","assets/useScrollReveal-BC-245pq.js","assets/Skeleton-CO9Y7n0A.js","assets/helpers-CQG1Y5Ia.js","assets/Dashboard-C5HGiccS.css","assets/Audits-BasGwVI6.js","assets/Audits-BbU20BUV.css","assets/Pentest-DR9Xdrmt.js","assets/input.validator-7PKJK-co.js","assets/Pentest-D7DQ-GHs.css","assets/Feedback-h_r9Yf2O.js","assets/Feedback-CnsUvJ1-.css","assets/Landing-CBC3faQQ.js","assets/Landing-B9U_Akav.css","assets/About-DoGN7cqi.js","assets/About-C28b49NG.css","assets/Team-B3xqZrMu.js","assets/Team-BTxp9IQA.css","assets/Developer-Ce6QMreF.js","assets/Developer-DS8aT0qB.css","assets/Community-Cg1IW1wV.js","assets/Community-Cjn7me4s.css","assets/StudentDashboard-CydvebC_.js","assets/StudentDashboard-BwmZF93V.css","assets/Careers-5Y3F903Z.js","assets/Careers-CouARebu.css","assets/Methodology-lMEhlKG9.js","assets/Methodology-D_6ZWHvx.css","assets/CaseStudies-DkcU8jTL.js","assets/CaseStudies-sGTip6yG.css","assets/Blog-Cr5nbv94.js","assets/Blog-CNXiblwI.css","assets/NotFound-bHUOL3e2.js","assets/NotFound-Drm0g1fe.css"])))=>i.map(i=>d[i]);
import{r as e,a as t,R as o,B as s,b as r,c as n,N as i}from"./react-vendor-Dt--M4EP.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const o of e)if("childList"===o.type)for(const e of o.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var a={exports:{}},l={},c=e,u=Symbol.for("react.element"),d=Symbol.for("react.fragment"),m=Object.prototype.hasOwnProperty,h=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};function g(e,t,o){var s,r={},n=null,i=null;for(s in void 0!==o&&(n=""+o),void 0!==t.key&&(n=""+t.key),void 0!==t.ref&&(i=t.ref),t)m.call(t,s)&&!p.hasOwnProperty(s)&&(r[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===r[s]&&(r[s]=t[s]);return{$$typeof:u,type:e,key:n,ref:i,props:r,_owner:h.current}}l.Fragment=d,l.jsx=g,l.jsxs=g,a.exports=l;var _=a.exports,f={},y=t;f.createRoot=y.createRoot,f.hydrateRoot=y.hydrateRoot;const j="hsociety_session";const x=new class{constructor(){this.storage="undefined"!=typeof window?window.sessionStorage:null}setSession(e){if(!this.storage)return!1;try{const t={...e,timestamp:e.timestamp||Date.now(),expiresAt:Date.now()+864e5};return this.storage.setItem(j,JSON.stringify(t)),!0}catch(t){return console.error("Failed to set session:",t),!1}}getSession(){if(!this.storage)return null;try{const e=this.storage.getItem(j);return e?JSON.parse(e):null}catch(e){return console.error("Failed to get session:",e),null}}updateSession(e){const t=this.getSession();if(!t)return!1;const o={...t,...e,timestamp:Date.now()};return this.setSession(o)}clearSession(){if(this.storage)try{this.storage.removeItem(j),this.storage.removeItem("logout-reason")}catch(e){console.error("Failed to clear session:",e)}}isSessionValid(){const e=this.getSession();return!!e&&(!(!e.user||!e.token)&&(!(e.expiresAt&&Date.now()>e.expiresAt)||(console.log("Session expired"),this.clearSession(),!1)))}getToken(){const e=this.getSession();return e?e.token:null}getUser(){const e=this.getSession();return e?e.user:null}isAuthenticated(){return this.isSessionValid()}getSessionAge(){const e=this.getSession();return e&&e.timestamp?Date.now()-e.timestamp:null}getTimeUntilExpiry(){const e=this.getSession();if(!e||!e.expiresAt)return null;const t=e.expiresAt-Date.now();return t>0?t:0}},E=e.createContext(void 0),w=({children:t})=>{const[o,s]=e.useState(null),[r,n]=e.useState(null),[i,a]=e.useState(!1),[l,c]=e.useState(!0),[u,d]=e.useState(null);e.useEffect(()=>{m()},[]);const m=async()=>{try{c(!0);const e=x.getSession();if(e&&e.token&&e.user){x.isSessionValid()?(s(e.user),n(e.token),a(!0),h()):await p(!1)}}catch(e){console.error("Auth initialization error:",e),await p(!1)}finally{c(!1)}},h=()=>{u&&u();const e=(({timeout:e=9e5,onTimeout:t,onWarning:o=null,warningTime:s=12e4,events:r=["mousedown","keydown","scroll","touchstart","click","mousemove"]}={})=>{if(!t||"function"!=typeof t)return console.error("Auto logout requires onTimeout callback"),()=>{};let n=null,i=null,a=!1;const l=()=>{a=!1,n&&clearTimeout(n),i&&clearTimeout(i),o&&s>0&&s<e&&(i=setTimeout(()=>{a||(a=!0,o({remainingTime:e-s,totalTimeout:e}))},e-s)),n=setTimeout(()=>{console.log("Auto logout triggered due to inactivity"),t()},e)},c=()=>{l()};return r.forEach(e=>{window.addEventListener(e,c,{passive:!0})}),l(),()=>{r.forEach(e=>{window.removeEventListener(e,c)}),n&&clearTimeout(n),i&&clearTimeout(i),console.log("Auto logout monitor cleaned up")}})({timeout:9e5,onTimeout:async()=>{console.log("Session timed out due to inactivity"),await p(!0)},events:["mousedown","keydown","scroll","touchstart","click"]});d(()=>e)},p=async(e=!1)=>{try{u&&(u(),d(null)),x.clearSession(),s(null),n(null),a(!1),e&&sessionStorage.setItem("logout-reason","inactivity"),"undefined"!=typeof window&&(window.location.href="/login")}catch(t){console.error("Logout error:",t),x.clearSession(),s(null),n(null),a(!1)}},g={user:o,token:r,isAuthenticated:i,isLoading:l,login:async(e,t)=>{try{if(!e||!t)throw new Error("Invalid login credentials");return x.setSession({user:e,token:t,timestamp:Date.now()}),s(e),n(t),a(!0),h(),{success:!0}}catch(o){return console.error("Login error:",o),{success:!1,error:o.message}}},logout:p,updateUser:e=>{if(!i)return;const t={...o,...e};x.updateSession({user:t}),s(t)},refreshToken:async()=>{try{const e=r;return x.updateSession({token:e}),n(e),{success:!0,token:e}}catch(e){return console.error("Token refresh error:",e),await p(),{success:!1,error:e.message}}},hasRole:e=>!(!o||!o.role)&&o.role===e,hasAnyRole:e=>!(!o||!o.role)&&e.includes(o.role)};return _.jsx(E.Provider,{value:g,children:t})},v=()=>{const t=e.useContext(E);if(void 0===t)throw new Error("useAuth must be used within an AuthProvider");return t},S=e.createContext(void 0),T=({children:t})=>{const[o,s]=e.useState(()=>{if("undefined"!=typeof window){return localStorage.getItem("hsociety-theme")||"light"}return"light"});e.useEffect(()=>{const e=document.documentElement;e.removeAttribute("data-theme"),e.setAttribute("data-theme",o),localStorage.setItem("hsociety-theme",o);const t=document.querySelector('meta[name="theme-color"]');t&&t.setAttribute("content","dark"===o?"#000000":"#ffffff"),r(o)},[o]);const r=e=>{const t=document.querySelector('link[rel="icon"]'),o=document.querySelector('link[rel="apple-touch-icon"]'),s="dark"===e?"/FAVICON_HSOCIETY_WHITE/favicon.ico":"/FAVICON_HSOCIETY_BLACK/favicon.ico",r="dark"===e?"/FAVICON_HSOCIETY_WHITE/apple-touch-icon.png":"/FAVICON_HSOCIETY_BLACK/apple-touch-icon.png";t&&(t.href=s),o&&(o.href=r)},n={theme:o,toggleTheme:()=>{s(e=>"light"===e?"dark":"light")},setTheme:e=>{"light"!==e&&"dark"!==e||s(e)},isDark:"dark"===o,isLight:"light"===o};return _.jsx(S.Provider,{value:n,children:t})},A=()=>{const t=e.useContext(S);if(void 0===t)throw new Error("useTheme must be used within a ThemeProvider");return t},k={},I=function(e,t,o){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),o=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));s=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in k)return;k[e]=!0;const t=e.endsWith(".css"),s=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${s}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":"modulepreload",t||(r.as="script"),r.crossOrigin="",r.href=e,o&&r.setAttribute("nonce",o),document.head.appendChild(r),t?new Promise((t,o)=>{r.addEventListener("load",t),r.addEventListener("error",()=>o(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function r(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return s.then(t=>{for(const e of t||[])"rejected"===e.status&&r(e.reason);return e().catch(r)})},L=({size:e="medium",clickable:t=!1,className:o="",onClick:s=null})=>{const{theme:r}=A(),n="dark"===r?"/hsociety-logo-white.png":"/hsociety-logo-black.png",i={...{small:{height:"32px",width:"auto"},medium:{height:"48px",width:"auto"},large:{height:"64px",width:"auto"},xlarge:{height:"96px",width:"auto"}}[e],display:"block",objectFit:"contain",transition:"all 0.3s ease",cursor:t||s?"pointer":"default"};return _.jsx("div",{className:`logo-container ${o}`,onClick:()=>{s?s():t&&(window.location.href="/")},style:{display:"inline-flex",alignItems:"center",justifyContent:"center"},children:_.jsx("img",{src:n,alt:"HSOCIETY Logo",style:i,className:"logo-image",onError:e=>{console.error("Logo failed to load:",n),e.target.style.display="none"}})})},O=({message:e="Initializing secure workspace..."})=>_.jsx("div",{className:"page-loader",role:"status","aria-live":"polite",children:_.jsxs("div",{className:"page-loader-inner",children:[_.jsx(L,{size:"large",className:"page-loader-logo"}),_.jsx("div",{className:"page-loader-bar"}),_.jsx("p",{className:"page-loader-text",children:e})]})}),b=o.lazy(()=>I(()=>import("./Login-v7QJJN69.js"),__vite__mapDeps([0,1,2,3,4]))),P=o.lazy(()=>I(()=>import("./Register-A1qVRr0H.js"),__vite__mapDeps([5,1,2,3,6,4]))),R=o.lazy(()=>I(()=>import("./Dashboard-CpP9fkU-.js"),__vite__mapDeps([7,1,2,3,8,9,6,10,11]))),D=o.lazy(()=>I(()=>import("./Audits-BasGwVI6.js"),__vite__mapDeps([12,1,2,3,8,9,10,13]))),C=o.lazy(()=>I(()=>import("./Pentest-DR9Xdrmt.js"),__vite__mapDeps([14,1,2,3,8,9,15,16]))),N=o.lazy(()=>I(()=>import("./Feedback-h_r9Yf2O.js"),__vite__mapDeps([17,1,2,3,15,8,18]))),V=o.lazy(()=>I(()=>import("./Landing-CBC3faQQ.js"),__vite__mapDeps([19,1,8,2,3,20]))),z=o.lazy(()=>I(()=>import("./About-DoGN7cqi.js"),__vite__mapDeps([21,1,2,3,8,22]))),F=o.lazy(()=>I(()=>import("./Team-B3xqZrMu.js"),__vite__mapDeps([23,1,2,3,8,24]))),q=o.lazy(()=>I(()=>import("./Developer-Ce6QMreF.js"),__vite__mapDeps([25,1,2,3,8,26]))),B=o.lazy(()=>I(()=>import("./Community-Cg1IW1wV.js"),__vite__mapDeps([27,1,2,3,8,28]))),H=o.lazy(()=>I(()=>import("./StudentDashboard-CydvebC_.js"),__vite__mapDeps([29,1,2,3,8,9,30]))),U=o.lazy(()=>I(()=>import("./Careers-5Y3F903Z.js"),__vite__mapDeps([31,1,2,3,8,32]))),Y=o.lazy(()=>I(()=>import("./Methodology-lMEhlKG9.js"),__vite__mapDeps([33,1,2,3,8,34]))),$=o.lazy(()=>I(()=>import("./CaseStudies-DkcU8jTL.js"),__vite__mapDeps([35,1,2,3,8,36]))),W=o.lazy(()=>I(()=>import("./Blog-Cr5nbv94.js"),__vite__mapDeps([37,1,2,3,8,38]))),M=o.lazy(()=>I(()=>import("./NotFound-bHUOL3e2.js"),__vite__mapDeps([39,1,2,3,40]))),K=({children:e,allowedRoles:t})=>{const{isAuthenticated:o,isLoading:s,user:r}=v(),n="client"===(null==r?void 0:r.role)?"corporate":null==r?void 0:r.role;return s?_.jsx(O,{message:"Preparing your workspace..."}):o?n&&t.includes(n)?e:_.jsx(i,{to:"student"===n?"/student-dashboard":"/dashboard",replace:!0}):_.jsx(i,{to:"/login",replace:!0})},J=({children:e})=>{const{isAuthenticated:t,isLoading:o}=v();return o?_.jsx(O,{message:"Preparing your workspace..."}):t?_.jsx(i,{to:"/dashboard",replace:!0}):e},G=()=>_.jsx(O,{message:"Loading secure interface..."}),Q=()=>_.jsx(s,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:_.jsx(o.Suspense,{fallback:_.jsx(G,{}),children:_.jsxs(r,{children:[_.jsx(n,{path:"/",element:_.jsx(V,{})}),_.jsx(n,{path:"/login",element:_.jsx(J,{children:_.jsx(b,{})})}),_.jsx(n,{path:"/register",element:_.jsx(J,{children:_.jsx(P,{})})}),_.jsx(n,{path:"/feedback",element:_.jsx(N,{})}),_.jsx(n,{path:"/about",element:_.jsx(z,{})}),_.jsx(n,{path:"/team",element:_.jsx(F,{})}),_.jsx(n,{path:"/developer",element:_.jsx(q,{})}),_.jsx(n,{path:"/community",element:_.jsx(B,{})}),_.jsx(n,{path:"/careers",element:_.jsx(U,{})}),_.jsx(n,{path:"/methodology",element:_.jsx(Y,{})}),_.jsx(n,{path:"/case-studies",element:_.jsx($,{})}),_.jsx(n,{path:"/blog",element:_.jsx(W,{})}),_.jsx(n,{path:"/student-dashboard",element:_.jsx(K,{allowedRoles:["student"],children:_.jsx(H,{})})}),_.jsx(n,{path:"/dashboard",element:_.jsx(K,{allowedRoles:["corporate"],children:_.jsx(R,{})})}),_.jsx(n,{path:"/audits",element:_.jsx(K,{allowedRoles:["corporate"],children:_.jsx(D,{})})}),_.jsx(n,{path:"/pentest",element:_.jsx(K,{allowedRoles:["corporate"],children:_.jsx(C,{})})}),_.jsx(n,{path:"*",element:_.jsx(M,{})})]})})}),X=()=>_.jsx(T,{children:_.jsx(w,{children:_.jsx("div",{className:"app-shell",children:_.jsx(Q,{})})})}),Z=document.getElementById("root");if(!Z)throw new Error('Failed to find the root element. Make sure index.html has a div with id="root"');f.createRoot(Z).render(_.jsx(o.StrictMode,{children:_.jsx(X,{})}));export{L,A as a,_ as j,x as s,v as u};
