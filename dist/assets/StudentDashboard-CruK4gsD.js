import{j as s}from"./index-BKTFHamk.js";import{r as e}from"./react-vendor-Dt--M4EP.js";import{N as a,T as t,C as r,i as l,r as n,z as i,a as d,m as c,j as o,U as h,b as m,d as j}from"./Card-D7Goz3Sa.js";import{u as p}from"./useScrollReveal-BC-245pq.js";import{B as x}from"./Button-Byl8E1dD.js";import{S as u}from"./Skeleton-dYOkrYE5.js";import{a as g,A as v}from"./api.client-DUIoE9I7.js";import"./icons-9q4Ww-N4.js";const N=(s={})=>({id:String(s.id||""),title:s.title||"Untitled module",status:s.status||"next",progress:Number(s.progress||0)}),f=(s={})=>({id:String(s.id||""),title:s.title||"Untitled challenge",level:s.level||"Easy",time:s.time||"",icon:s.icon||"target"}),b=(s={})=>({id:String(s.id||""),name:s.name||"Mentor",focus:s.focus||"",status:s.status||"Unavailable"}),y=(s={})=>({id:String(s.id||""),label:s.label||"",value:String(s.value||"0"),icon:s.icon||"check"}),S=(s={})=>({learningPath:(s.learningPath||[]).map(N),challenges:(s.challenges||[]).map(f),mentors:(s.mentors||[]).map(b),snapshot:(s.snapshot||[]).map(y)}),w=()=>{p();const[N,f]=e.useState(!0),[b,y]=e.useState({learningPath:[],challenges:[],mentors:[],snapshot:[]}),[w,k]=e.useState("");e.useEffect(()=>{(async()=>{f(!0);try{const s=await(async()=>{const s=await g.get(v.STUDENT.OVERVIEW);return s.success?{success:!0,data:S(s.data||{})}:{success:!1,error:s.error||"Failed to fetch student overview"}})();if(!s.success)throw new Error(s.error||"Failed to load student dashboard");y(s.data)}catch(s){console.error("Student dashboard error:",s),k("Unable to load student dashboard data.")}finally{f(!1)}})()},[]);const z={target:n,shield:m,flag:h,check:o,clock:c,lock:d,code:i},P=["https://images.unsplash.com/photo-1544723795-3fb6469f5b39?auto=format&fit=crop&w=200&q=80","https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?auto=format&fit=crop&w=200&q=80"];return s.jsxs(s.Fragment,{children:[s.jsx(a,{}),s.jsxs("div",{className:"student-page",children:[s.jsxs("header",{className:"student-hero reveal-on-scroll",children:[s.jsxs("div",{children:[s.jsx("p",{className:"student-kicker",children:"Student Dashboard"}),s.jsx("h1",{children:"Build skills with real-world practice."}),s.jsx("p",{children:"Track your learning path, complete labs, and connect with mentors."})]}),s.jsxs(x,{variant:"primary",size:"large",children:[s.jsx(t,{size:18}),"Start Learning"]})]}),w&&s.jsx(r,{padding:"large",className:"student-card reveal-on-scroll",children:s.jsx("p",{style:{margin:0,color:"var(--text-secondary)"},children:w})}),N?s.jsx("div",{className:"student-grid",children:[1,2,3].map(e=>s.jsxs(r,{padding:"large",className:"student-card",children:[s.jsx(u,{className:"skeleton-line",style:{width:"40%"}}),s.jsx(u,{className:"skeleton-line",style:{width:"80%",marginTop:"0.75rem"}}),s.jsx(u,{className:"skeleton-line",style:{width:"60%",marginTop:"0.75rem"}})]},e))}):s.jsxs("div",{className:"student-grid",children:[s.jsxs(r,{padding:"large",className:"student-card reveal-on-scroll",children:[s.jsxs("div",{className:"student-card-header",children:[s.jsx(l,{size:20}),s.jsx("h3",{children:"Learning Path"})]}),s.jsx("div",{className:"student-path",children:b.learningPath.map(e=>s.jsxs("div",{className:"path-item",children:[s.jsxs("div",{className:"path-info",children:[s.jsx("span",{children:e.title}),s.jsx("span",{className:`path-status ${e.status}`,children:"done"===e.status?"Completed":"in-progress"===e.status?"In Progress":"Next Up"})]}),s.jsx("div",{className:"path-bar",children:s.jsx("div",{style:{width:`${e.progress}%`}})})]},e.id))})]}),s.jsxs(r,{padding:"large",className:"student-card reveal-on-scroll",children:[s.jsxs("div",{className:"student-card-header",children:[s.jsx(n,{size:20}),s.jsx("h3",{children:"Practice Labs"})]}),s.jsx("div",{className:"student-labs",children:b.challenges.map(e=>{const a=z[e.icon]||n;return s.jsxs("div",{className:"lab-item",children:[s.jsx("div",{className:"lab-icon",children:s.jsx(a,{size:20})}),s.jsxs("div",{children:[s.jsx("h4",{children:e.title}),s.jsxs("span",{children:[e.level," Â· ",e.time]})]}),s.jsx(x,{variant:"ghost",size:"small",children:"Launch"})]},e.id)})})]}),s.jsxs(r,{padding:"large",className:"student-card reveal-on-scroll",children:[s.jsxs("div",{className:"student-card-header",children:[s.jsx(j,{size:20}),s.jsx("h3",{children:"Mentor Support"})]}),s.jsx("div",{className:"mentor-list",children:b.mentors.map((e,a)=>s.jsxs("div",{className:"mentor-row",children:[s.jsxs("div",{className:"mentor-avatar",children:[s.jsx("img",{src:P[a%P.length],alt:e.name,loading:"lazy",onError:s=>{s.currentTarget.style.opacity="0"}}),s.jsx("div",{className:"mentor-fallback","aria-hidden":"true"})]}),s.jsxs("div",{children:[s.jsx("h4",{children:e.name}),s.jsx("span",{children:e.focus})]}),s.jsx("span",{className:"mentor-status "+("Available"===e.status?"online":"busy"),children:e.status})]},e.id))}),s.jsx(x,{variant:"secondary",size:"small",children:"Book a Session"})]})]}),s.jsx("section",{className:"student-bottom reveal-on-scroll",children:s.jsxs(r,{padding:"large",className:"student-card",children:[s.jsxs("div",{className:"student-card-header",children:[s.jsx(m,{size:20}),s.jsx("h3",{children:"Progress Snapshot"})]}),s.jsx("div",{className:"snapshot-grid",children:N?[1,2,3,4].map(e=>s.jsx("div",{className:"snapshot-item",children:s.jsx(u,{className:"skeleton-line",style:{width:"50%"}})},e)):b.snapshot.map(e=>{const a=z[e.icon]||o;return s.jsxs("div",{className:"snapshot-item",children:[s.jsx(a,{size:18}),s.jsxs("div",{children:[s.jsx("h4",{children:e.value}),s.jsx("span",{children:e.label})]})]},e.id)})})]})})]})]})};export{w as default};
